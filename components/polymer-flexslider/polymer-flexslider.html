
<link rel="import" href="../polymer/polymer.html">
 <!-- Importing liibraries -->
<script src="../jquery/dist/jquery.min.js"></script>
<script src="../flexslider/jquery.flexslider-min.js"></script>
<link rel="stylesheet" href="../flexslider/flexslider.css">

<!--
`polymer-flexslider`

A basic ploymer elemetn that uses flexlslider library to change elements to slider.

    <polymer-flexslider
        animationr="slide"
        pause-on-hover="false"
        ....>
      </polymer-flexslider>
  All properties are the mapping of the actual property of the <strong>Flexslider.js</strong> library

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--flexslider-container`    | Mixin applied to the Flexslide container | `{}`
`--flexslider-container-slides`     | Mixin applied to flexslider slides container  | `{}`
`--flexslider-container-nav`       | Mixin applied to Navigation container | `{}`
`--flexslider-container-nav-link` | Mixin aplied to Navigation container link, | `{}`

@demo demo/index.html
-->

<dom-module id="polymer-flexslider">
  <template>
    <style>
      :host {
        display: block;
        --flexslider-container: {
          padding: 5px;
        };
        --flexslider-container-slides: {
          height: 100%;
          overflow: hidden;
        };
        --flexslider-container-nav: {
          bottom: 0;
        }
        --flexslider-container-nav-link: {
          margin: -40px 0 0;
        }
      }
      .flexslider {
        @apply(--flexslider-container);
      }
      .flexslider .slides {
        @apply(--flexslider-container-slides);
      }
      .flexslider .flex-control-nav {
        @apply(--flexslider-container-nav);
      }
      .flexslider .flex-direction-nav a {
        @apply(--flexslider-container-nav-link);
      }
    </style>

    <div id="flexslider" class="flexslider">
      <ul class="slides">
        <content></content>
      </ul>
    </div>
  </template>

  <script>
    Polymer({

      is: 'polymer-flexslider',

      /**
       * Function Fires when the slider loads the first slide.
       *
       * @event start
       */

      /**
       * Function Fires asynchronously with each slider animation.
       *
       * @event before
       */

      /**
       * Function Fires after each slider animation completes.
       *
       * @event after
       */

      /**
       * Function Fires when the slider reaches the last slide (asynchronous).
       *
       * @event end
       */

      /**
       * Function Fires after a slide is added.
       *
       * @event added
       */

      /**
       * Function Fires after a slide is removed.
       *
       * @event removed
       */

      properties: {

        /**
         * Prefix string attached to the classes of all elements generated by the plugin.
         */

        namespace: {
          type: String,
          value: 'flex-',
        },

        /**
         * Selector Must match a simple pattern. ' {slide}' (container already defined).
         */

        selector: {
          type: String,
          value: 'li',
        },

        /**
         * Controls the animation type, "fade" or "slide".
         */

        animation: {
          type: String,
          value: 'fade',
        },

        /**
         * Determines the easing method used in jQuery transitions.
         */

        easing:{
          type: String,
          value: 'swing',
        },

        /**
         * Controls the animation direction, "horizontal" or "vertical"
         */

        direction: {
          type: String,
          value: 'horizontal',
        },

        /**
         * Reverse the animation direction.
         */

        reverse: {
          type: Boolean,
          value: false,
        },

        /**
         * Gives the slider a seamless infinite loop.
         */

        animationLoop: {
          type: Boolean,
          value: true,
        },

        /**
         * Boolean Animate the height of the slider smoothly for slides of varying height.
         */

        smoothHeight: {
          type: Boolean,
          value: false,
        },

        /**
         * The starting slide for the slider, in array notation.
         */

        startAt: {
          type: Number,
          value: 0,
        },

        /**
         * Setup a slideshow for the slider to animate automatically.
         */

        slideshow: {
          type: Boolean,
          value: true,
        },

        /**
         * Set the speed of the slideshow cycling, in milliseconds
         */

        slideshowSpeed: {
          type: Number,
          value: 7000,
        },

        /**
         * Set the speed of animations, in milliseconds
         */

        animationSpeed: {
          type: Number,
          value: 600,
        },

        /**
         * Set an initialization delay, in milliseconds
         */

        initDelay: {
          type: Number,
          value: 0,
        },

        /**
         * Randomize slide order, on load
         */

        randomize: {
          type: Boolean,
          value: false,
        },

        /**
         * Pause the slideshow when interacting with control elements.
         */

        pauseOnAction: {
          type: Boolean,
          value: true,
        },

        /**
         * Pause the slideshow when hovering over slider, then resume when no longer hovering.
         */

        pauseOnHover: {
          type: Boolean,
          value: false,
        },

        /**
         * Slider will use CSS3 transitions, if available
         */

        useCSS: {
          type: Boolean,
          value: true,
        },

        /**
         * Allow touch swipe navigation of the slider on enabled devices
         */

        touch: {
          type: Boolean,
          value: true,
        },

        /**
         * Will prevent use of CSS3 3D Transforms, avoiding graphical glitches
         */

        video: {
          type: Boolean,
          value: false,
        },

        /**
         * Create navigation for paging control of each slide.
         */

        controlNav: {
          type: Boolean,
          value: true,
        },

        /**
         * jQuery Object/Selector Container the custom navigation markup works with.,
         */

        customDirectionNav: {
          type: String,
          value: '',
        },

        /**
         * Create previous/next arrow navigation.
         */

        directionNav: {
          type: Boolean,
          value:true,
        },

        /**
         * Set the text for the "previous" directionNav item
         */

        prevText: {
          type: String,
          value: "Previous",
        },

        /**
         * Set the text for the "next" directionNav item
         */

        nextText: {
          type: String,
          value: 'Next',
        },

        /**
         * Allow slider navigating via keyboard left/right keys.
         */

        keyboard: {
          type: Boolean,
          value: true,
        },

        /**
         * Allow keyboard navigation to affect multiple sliders.
         */

        multipleKeyboard: {
          type: Boolean,
          value: false,
        },

        /**
         * (Dependency) Allows slider navigating via mousewheel
         */

        mousewheel:{
          type: Boolean,
          value: false,
        },

        /**
         * Create pause/play element to control slider slideshow.
         */

        pausePlay: {
          type: Boolean,
          value: false,
        },

        /**
         * Set the text for the "pause" pausePlay item
         */

        pauseText: {
          type: String,
          value: "Pause",
        },

        /**
         * Set the text for the "play" pausePlay item
         */

        playText: {
          type: String,
          value: "Play",
        },

        /**
         * jQuery Object/Selector Container the navigation elements should be appended to.
         */

        controlsContainer: {
          type: String,
          value: '',
        },

        /**
         * jQuery Object/Selector Define element to be used in lieu of dynamic controlNav.
         */

        manualControls: {
          type: String,
          value: '',
        },

        /**
         * Selector Mirror the actions performed on this slider with another slider.
         */

        sync: {
          type: Boolean,
          value: '',
        },

        /**
         * (Selector) Turn the slider into a thumbnail navigation for another slider.
         */

        asNavFor:{
          type: String,
          value: '',
        },

        /**
         * Box-model width of individual carousel items, including horizontal borders and padding.
         */

        itemWidth:{
          type: Number,
          value: 0,
        },

        /**
         * Margin between carousel items.
         */

        itemMargin: {
         type: Number,
         value: 0,
        },

        /**
         * Minimum number of carousel items that should be visible.
         */

        minItems: {
          type: Number,
          value: 0,
        },

        /**
         * Maximum number of carousel items that should be visible.
         */

        maxItems: {
          type: Number,
          value: 0,
        },

        /**
         * Number of carousel items that should move on animation.
         */

        move: {
          type: Number,
          value: 0,
        },
      },

      /**
       * Returns options passed to the flexslider function as JSON
       */

      getConfigJSON: function(){
        var self = this;
        return {
          namespace: self.namespace,
          selector: '.slides >' + self.selector,
          animation: self.animation,
          easing: self.easing,
          direction: self.direction,
          reverse: self.reverse,
          animationLoop: self.animationLoop,
          smoothHeight: self.smoothHeight,
          startAt: self.startAt,
          slideshow: self.slideshow,
          slideshowSpeed: self.slideshowSpeed,
          animationSpeed: self.animationSpeed,
          initDelay: self.initDelay,
          randomize: self.randomize,
          pauseOnAction: self.pauseOnAction,
          pauseOnHover: self.pauseOnHover,
          useCSS: self.useCSS,
          touch: self.touch,
          video: self.video,
          controlNav: self.controlNav,
          customDirectionNav: self.customDirectionNav,
          directionNav: self.directionNav,
          prevText: self.prevText,
          nextText: self.nextText,
          keyboard: self.keyboard,
          multipleKeyboard: self.multipleKeyboard,
          mousewheel: self.mousewheel,
          pausePlay: self.pausePlay,
          pauseText: self.pauseText,
          playText: self.playText,
          controlsContainer: self.controlsContainer,
          manualControls: self.manualControls,
          sync: self.sync,
          asNavFor: self.asNavFor,
          itemWidth: self.itemWidth,
          itemMargin: self.itemMargin,
          minItems: self.minItems,
          maxItems: self.maxItems,
          move: self.move,
          start: function(){
            self.fire('start');
          },
          before: function(){
            self.fire('before');
          },
          after: function(){
            self.fire('after');
          },
          end: function(){
            self.fire('end');
          },
          added: function(){
            self.fire('added');
          },
          removed: function(){
            self.fire('removed');
          },
        };
      },
      ready: function(){
        var self = this;
        var flex = self.$.flexslider;
        var options = this.getConfigJSON();
        (function($){
          $(flex).flexslider(options);
        })(jQuery);
      }
    });
  </script>
</dom-module>
